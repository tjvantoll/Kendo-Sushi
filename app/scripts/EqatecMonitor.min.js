(function(n){function s(b){var a=!1,f="",d=0,e=1,g={},h=[],j=[],k=function(a){if(c.isString(a)){var d=c.trim(c.asString(a));if(d){if(c.stringTooLong(b,d,1E3))return null;var a="eq_"+a,f=g[a];f||(f={featureName:d,sessionHitCount:0,timingStart:0},g[a]=f);return f}return null}},m=function(){j=[];h=[]};return{addFeatureUsage:function(a){if(a=k(a))a.sessionHitCount+=1,e++},startFeatureTiming:function(a){if((a=k(a))&&!(0<a.timingStart))a.timingStart=c.getTimeStamp()},endFeatureTiming:function(a){if((a=
k(a))&&0!==a.timingStart){var b=c.getTimeStamp(),f=b-a.timingStart;a.timingStart=0;h.push({name:a.featureName,value:f,type:1,runtime:b-d});e++}},cancelFeatureTiming:function(a){if(a=k(a))a.timingStart=0},addFeatureValue:function(a,b){var f=c.trim(c.asString(a));if(f&&c.isNumber(b)){var g=c.getTimeStamp();h.push({name:f,value:b,type:0,runtime:g-d});e++}},addException:function(a,f){if(a){var g=c.asString(f),h=c.getTimeStamp(),m="",l=typeof a,k=a.message||a.name||"";try{m=c.stackTrace({e:a})}catch(i){c.error(b,
"could not format stacktrace: "+i.message)}10<j.length&&(c.logMessage(b,"removing oldest exception"),j.pop());j.push({type:l,message:k,runtime:h-d,info:g,stacktrace:m});e++}},setInstallationID:function(a){if(!c.stringTooLong(b,a,50)&&(a=c.asString(a)))f=a,e++},reset:m,clear:function(){m();g={}},getPayload:function(){var b=[],c;for(c in g)if(g.hasOwnProperty(c)){var d=g[c];d.sessionHitCount&&b.push({name:d.featureName,sessionHitCount:d.sessionHitCount})}return{installationId:f,stopped:a?"0":"1",features:b,
exceptions:j,featurevalues:h}},startTime:d,version:function(){return e},startSession:function(){d=c.getTimeStamp();a=!0},stopSession:function(){a=!1}}}var c={isFunction:function(b){return b&&"function"===typeof b},callIfFunction:function(b){try{c.isFunction(b)&&b()}catch(a){}},isString:function(b){return b&&"string"===typeof b},asString:function(b){var a="";b&&(a=c.isFunction(b)?c.asString(b()):b.toString());return a},trim:function(b){return b?!String.prototype.trim?b.replace(/^\s\s*/,"").replace(/\s\s*$/,
""):b.trim():""},getTimeStamp:function(){return(new Date).getTime()},isNumber:function(b){return"number"===typeof b},parseURL:function(b){for(var a="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),c={},d=14,b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b);d--;)c[a[d]]=b[d]||"";return c},
getServerUri:function(b,a,f){if(f&&c.isString(f))try{var d=c.parseURL(f);if(d&&d.host)return(d.protocol?d.protocol+"://":"//")+d.host+(d.port?":"+d.port:"")+"/json.ashx";c.log(b,"Could not parse serverUri to valid format:"+f)}catch(e){c.log(b,"unable to parse serverUri to valid format:"+f)}b="https";window&&(window.location&&"https:"!=window.location.protocol)&&(b="http");return b+"://"+a+".monitor-eqatec.com/json.ashx"},log:function(b,a){try{b&&(c.isFunction(b.logMessage)&&a&&c.isString(a))&&b.logMessage(a)}catch(f){}},
error:function(b,a){try{b&&(c.isFunction(b.logError)&&a&&c.isString(a))&&b.logError(a)}catch(f){}},getInfo:function(b){var a={},f=navigator,d=screen,e=document;a.screen=d?d.width+"x"+d.height:"-";a.depth=d?d.colorDepth+"-bit":"-";a.language=(f&&(f.language||f.userLanguage)||"-").toLowerCase();a.characterSet=e.characterSet||e.charset||"-";try{var g=e.documentElement,h=e.body,j=h&&h.clientWidth&&h.clientHeight,f=[];g&&(g.clientWidth&&g.clientHeight&&("CSS1Compat"===e.compatMode||!j)?f=[g.clientWidth,
g.clientHeight]:j&&(f=[h.clientWidth,h.clientHeight]));a.clientsize=f.join("x")}catch(k){c.error(b,"Unable to read browser info: "+k.message)}return a},generateId:function(){for(var b=void 0,a=void 0,a=b="";36>b++;a+=51*b&52?(b^15?8^Math.random()*(b^20?16:4):4).toString(16):"-");return a},setCookie:function(b,a,f,d,e){var g=document;g&&(b=b+"="+a+";path="+f+";",d&&0<d&&(d=new Date(c.getTimeStamp()+d),b+="expires="+d.toUTCString()+";"),e&&(b+="domain="+e+";"),g.cookie=b)},getCookie:function(b){var a=
document.cookie.split(";"),c;for(c=0;c<a.length;c++){var d=a[c].split("=");if(2==d.length&&b==d[0])return d[1]}return null},setTimeout:function(b,a){try{if(c.isFunction(b)&&c.isNumber(a))return n.setTimeout(b,a)}catch(f){}return 0},clearTimeout:function(b){try{c.isNumber(b)&&n.clearTimeout(b)}catch(a){}},cookiesEnabled:function(){try{var b=navigator.cookieEnabled?!0:!1;"undefined"==typeof navigator.cookieEnabled&&!b&&(document.cookie="testcookie",b=-1!=document.cookie.indexOf("testcookie")?!0:!1);
return b}catch(a){}return!1},trackingDisabled:function(){return!1},stringTooLong:function(b,a,f){return!c.isString(a)||!c.isNumber(f)?!0:c.asString(a).length>f?(c.error(b,"Input is too long: "+a),!0):!1}};(function(){function b(a){return 10>a?"0"+a:a}function a(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=j[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(b,c){var d,e,j,n,l=g,o,i=c[b];i&&"object"===typeof i&&"function"===
typeof i.toJSON&&(i=i.toJSON(b));"function"===typeof k&&(i=k.call(c,b,i));switch(typeof i){case "string":return a(i);case "number":return isFinite(i)?""+i:"null";case "boolean":case "null":return""+i;case "object":if(!i)return"null";g+=h;o=[];if("[object Array]"===Object.prototype.toString.apply(i)){n=i.length;for(d=0;d<n;d+=1)o[d]=f(d,i)||"null";j=0===o.length?"[]":g?"[\n"+g+o.join(",\n"+g)+"\n"+l+"]":"["+o.join(",")+"]";g=l;return j}if(k&&"object"===typeof k){n=k.length;for(d=0;d<n;d+=1)"string"===
typeof k[d]&&(e=k[d],(j=f(e,i))&&o.push(a(e)+(g?": ":":")+j))}else for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(j=f(e,i))&&o.push(a(e)+(g?": ":":")+j);j=0===o.length?"{}":g?"{\n"+g+o.join(",\n"+g)+"\n"+l+"}":"{"+o.join(",")+"}";g=l;return j;default:return""+i}}var d;d||(d={});"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+
b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,h,j={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof d.stringify&&(d.stringify=function(a,b,c){var d;h=g="";if("number"===typeof c)for(d=0;d<
c;d+=1)h+=" ";else"string"===typeof c&&(h=c);if((k=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return f("",{"":a})});c.encodeJSON=d.stringify})();(function(){function b(a){a=a&&a.e?a.e:null;return(new b.implementation).run(a)}b.implementation=function(){};b.implementation.prototype={run:function(a){if(!a)return"";var b;if(!(b=a))b=void 0;a=b;b=this._mode||this.mode(a);return"other"===b?this.other(arguments.callee):this[b](a)},mode:function(a){return a.arguments?
this._mode="chrome":window.opera&&a.stacktrace?this._mode="opera10":a.stack?this._mode="firefox":window.opera&&!("stacktrace"in a)?this._mode="opera":this._mode="other"},chrome:function(a){return a.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@").split("\n")},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n")},opera10:function(a){var a=a.stacktrace.split("\n"),b=/.*line (\d+), column (\d+) in ((<anonymous function\:?\s*(\S+))|([^\(]+)\([^\)]*\))(?: in )?(.*)\s*$/i,
c,e,g;c=2;e=0;for(g=a.length;c<g-2;c++)if(b.test(a[c])){var h=RegExp.$6+":"+RegExp.$1+":"+RegExp.$2,j=RegExp.$3,j=j.replace(/<anonymous function\:?\s?(\S+)?>/g,"{anonymous}");a[e++]=j+"@"+h}a.splice(e,a.length-e);return a},opera:function(a){var a=a.message.split("\n"),b=/Line\s+(\d+).*script\s+(http\S+)(?:.*in\s+function\s+(\S+))?/i,c,e,g;c=4;e=0;for(g=a.length;c<g;c+=2)b.test(a[c])&&(a[e++]=(RegExp.$3?RegExp.$3+"()@"+RegExp.$2+RegExp.$1:"{anonymous}()@"+RegExp.$2+":"+RegExp.$1)+" -- "+a[c+1].replace(/^\s+/,
""));a.splice(e,a.length-e);return a},other:function(a){for(var b=/function\s*([\w\-$]+)?\s*\(/i,c=[],e=0,g,h;a&&10>c.length;){g=b.test(a.toString());h=[];try{h=Array.prototype.slice.call(a.arguments),a=a.caller}catch(j){a=null}g=g?RegExp.$1||"{anonymous}":"{anonymous}";c[e++]=g+"("+this.stringifyArguments(h)+")";if(!a)break}return c},stringifyArguments:function(a){for(var b=0;b<a.length;++b){var c=a[b];void 0===c?a[b]="undefined":null===c?a[b]="null":c.constructor&&(c.constructor===Array?a[b]=3>
c.length?"["+this.stringifyArguments(c)+"]":"["+this.stringifyArguments(Array.prototype.slice.call(c,0,1))+"..."+this.stringifyArguments(Array.prototype.slice.call(c,-1))+"]":c.constructor===Object?a[b]="#object":c.constructor===Function?a[b]="#function":c.constructor===String&&(a[b]='"'+c+'"'))}return a.join(",")}};c.stackTrace=b})();var p=n._eqatec||{};n._eqatec=p;p.createMonitor=function(b){var a=0,f="",d=!1,e={logError:function(){},logMessage:function(){}},g=0,h=!1,j=!1,k="",m="",p="",q={},t=
!1,r=!1,u="",l={};try{b=b||{},f=c.trim(c.asString(b.productId))||"",e=b.loggingInterface||e,p=b.version,q=b.location||{},t=c.cookiesEnabled()&&b.useCookies,r=c.trackingDisabled(),u=c.getServerUri(e,f,b.serverUri),l=s(e),(32>f.length||36<f.length)&&c.error(e,"Invalid productId assigned, expecting between 32 and 36 characters: "+f)}catch(o){c.log(e,"failed while initializing monitor")}var i=function(a){try{!d&&!a?c.log(e,"monitor not started"):h&&!a?j=!0:(x(a),l.reset())}catch(b){c.log(e,"failed while calling forceSync")}},
y=function(b){var d=c.getTimeStamp(),i=d-a,h={version:p,monitorversion:"3.2.61",productId:f,sessionId:k,startCount:startCount,userId:m,runtime:i,clienttime:d,starttime:a,session:l.getPayload()};q&&(q.latitude&&q.longitude)&&(h.location=q);b.push("pv=4");b.push("mv=3.2.61");b.push("pi="+encodeURIComponent(f));b.push("av="+encodeURIComponent(p));b.push("mt=js");b.push("ps="+(g+1));b.push("ct="+d);b.push("rt="+i);0===g&&(h.info=c.getInfo(e));return c.encodeJSON(h)},x=function(a){try{var b=!0===a?" Monitor stopped.":
"";c.getTimeStamp();j=!1;var d,f,a=[];l.version();f=y(a);var k="?"+a.join("&"),k=u+k;if(XMLHttpRequest&&void 0===d){var m=new XMLHttpRequest;"withCredentials"in m&&void 0!==m.withCredentials&&(m.open("POST",k,!0),m.setRequestHeader("Content-Type","text/plain"),m.onreadystatechange=function(){try{if(4==m.readyState){h=!1;var a=c.asString(m.status);0===a.indexOf("2")?(g++,c.log(e,"Statistics was sent successfully (xhr)."+b)):c.log(e,"Statistics failed to be sent: "+a);j&&i()}}catch(d){c.error(e,"failed to handle server reply")}},
d=m)}void 0!==n.XDomainRequest&&void 0===d&&(d=new n.XDomainRequest,d.open("POST",k),d.onprogress=function(){},d.onerror=function(){h=!1;c.log(e,"Statistics failed to be sent. (XDomainRequest error)")},d.onload=function(){g++;h=!1;c.log(e,"Statistics was sent successfully (xdr)."+b);j&&i()},d.ontimeout=function(){h=!1;c.log(e,"Statistics failed to be sent. Timeout")});d&&f?(d.send(f),h=!0):c.log(e,"Statistics failed to be sent. No valid request object could be created.")}catch(o){c.error(e,"failed to send data:"+
o.message)}},b={start:function(){try{if(!d&&!r){var b="",h=m||"",j=1,n=c.getTimeStamp();if(t){var o=!1,p=c.getCookie("__eqtSession");if(p){var q=p.split(".");2==q.length?(b=q[0],n=parseInt(q[1])):(b=c.generateId(f),o=!0,c.setCookie("__eqtSession",b+"."+n,"/",0,""))}else b=c.generateId(f),o=!0,c.setCookie("__eqtSession",b+"."+n,"/",0,"");var w=c.getCookie("__eqtUser");if(w){var v=w.split(".");2!=v.length?(h=c.generateId(f),j=1):(h=v[0],j=parseInt(v[1])+(o?1:0))}else h=c.generateId(f),j=1;c.setCookie("__eqtUser",
m+"."+j,"/",31536E6,"")}k=b||c.generateId(f);m=h;startCount=j;a=n;l.startSession();g=0;l.clear();d=!0;c.log(e,"monitor has started, connecting to "+u);i()}}catch(s){c.log(e,"failed while calling start. "+s.description)}},stop:function(){try{d&&!r&&(t&&c.setCookie("__eqtSession",""),l.stopSession(),i(!0),d=!1,c.log(e,"monitor has stopped"))}catch(a){c.log(e,"failed while calling stop")}},setInstallationID:function(a){try{l.setInstallationID(a),i()}catch(b){c.log(e,"failed while calling setInstallationID")}},
setUserID:function(a){try{m?c.logMessage(e,"UserID has already been assigned"):a&&(m=c.asString(a),i())}catch(b){c.log(e,"failed while calling setUserID")}},trackFeature:function(a){try{d?(l.addFeatureUsage(a),i()):c.log(e,"Monitor is not started")}catch(b){c.log(e,"failed while calling trackFeature")}},trackException:function(a,b){try{d&&(l.addException(a,b),i())}catch(f){c.log(e,"failed while calling trackException")}},trackFeatureValue:function(a,b){try{d&&(l.addFeatureValue(a,b),i())}catch(f){c.log(e,
"failed while calling trackFeatureValue")}},trackFeatureStart:function(a){try{d&&l.startFeatureTiming(a)}catch(b){c.log(e,"failed while calling trackFeatureStart")}},trackFeatureStop:function(a){try{d&&(l.endFeatureTiming(a),i())}catch(b){c.log(e,"failed while calling trackFeatureStop")}},trackFeatureCancel:function(a){try{d&&l.cancelFeatureTiming(a)}catch(b){c.log(e,"failed while calling trackFeatureCancel")}},status:function(){return{payloads:g,isStarted:d,isDisabled:r}}};n._eqatecDebug&&(b.statisticsContainer=
l);return b};p.createSettings=function(b){return{productId:b,serverUri:"",loggingInterface:void 0,version:"0.0.0.0",useCookies:!1,location:{latitude:"",longitude:""}}};p.createTraceLogger=function(){var b=function(a,b){console&&(console.log&&c.isFunction(console.log)&&b)&&console.log(a+b)};return{logMessage:function(a){b("",a)},logError:function(a){b("Error: ",a)}}};n._eqatecDebug&&(p.eqatecUtil=c)})(window);
